# Writing `<type>.md` documentation files

Documentation for a schema is written in a markdown file, named to match the corresponding schema. For example,
`schema/Link.schema.yaml` is documented in `schema/Link.md`. For the rest of this document we will refer to the `Link`
schema but this should be replaced with the name of whatever schema you are creating.

## Format Overview

Each documentation file should contain a title, list of authors, schema property documentation table and some examples
of the content.
Much of this can be automatically generated with `encoda` once an empty documentation markdown file has been created,
and there are some standard text that can just be included into the file.

### Generating Skeleton

A markdown file containing a table of the schema properties for your new schema can be generated by running `make docs`.
Then, you can create a markdown file next to the schema (i.e. `schema/<type>.md`). The public properties table can be
included in the file with an `include` directive:

```markdown
include: ../public/<type>.schema.md ::::::
```

Process the file with `encoda` to fill in this table and generate the metadata heading.

```bash
$ npx encoda process schema/<type>.md
```

You can now complete the `title` (it should match the `<type>`) and `authors` section.

## Intro Paragraph

The documentation should start with a level one header with the <type> and then a short description of how to use the
type.

## Examples

Following the introduction, include some examples of the implementation of this schema. With the use of `encoda` it is
possible to automatically generate these examples from a single implementation.

Start by creating a code block with the example in JSON format (this example will refer to the `Link.md` documentation).
Make sure the type is `json` and add `import=...` argument to name the code chunk as a variable.

```markdown
// extra spaces added between backticks for escaping, these are not necessary
`` `json import=ex1 { "type": "Link", "content": ["Stencila’s website"], "target": "https://stenci.la" }` ``
```

Now the code chunk can be referred to with the variable name given (in this case, `ex1`) with the `export` argument. To
convert to HTML, for example, just create a code chunk with the format and exported variable name:

```markdown
// extra spaces added between backticks for escaping, these are not necessary
`` `html export=ex1` ``
```

Now, run `encoda process` again:

```bash
$ npx encoda process schema/Link.md
```

And any exported code chunks should be automatically converted and included:

```markdown
// extra spaces added between backticks for escaping, these are not necessary
`` `html export=ex1 <a href="https://stenci.la">Stencila’s website</a>` ``
```

This can be done for most types supported by `encoda`. In some instances where full documents are generated (e.g. Docx
or ODF) you should instead export to a standalone file, like this:

```markdown
[`odt`](link-ex1.out.odt){export=ex1}
```

The file `link-ex1.out.odt` will be created.

### Markdown Examples

When writing Markdown examples within a Markdown file, a sequence of three (n) backticks can be escaped by enclosing it four (n+1) backticks e.g.

    ````
    ```py
    a + 6 * b
    ```
    ````

## Example Metadata

Each example should include a little bit about what the element has been converted to. It is also good to include a
link to a definition of which element a schema encodes to. For example, for Markdown examples, link to an
[MDAST](https://github.com/syntax-tree/mdast) definition. For HTML definitions,
[developer.mozilla.org](https://developer.mozilla.org/en-US/docs/Web/HTML/) is a good resource.

## Documentation Examples

The `schema/Link.md` and `schema/Delete.md` are good examples of documentation that can be referred to when writing your
own.
